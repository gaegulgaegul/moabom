{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "command=$(jq -r '.tool_input.command'); if echo \"$command\" | grep -qE '^git commit'; then cd \"$CLAUDE_PROJECT_DIR\" && rails test --fail-fast 2>/dev/null && rubocop --fail-level E 2>/dev/null || { echo 'âŒ í…ŒìŠ¤íŠ¸ ë˜ëŠ” RuboCop ì‹¤íŒ¨. ì»¤ë°‹ ì „ ìˆ˜ì • í•„ìš”.' >&2; exit 2; }; fi",
            "timeout": 120000
          }
        ]
      },
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "file_path=$(jq -r '.tool_input.file_path'); if echo \"$file_path\" | grep -qE '\\.env|credentials|master\\.key|secrets'; then echo 'âŒ ë¯¼ê° íŒŒì¼ ë³´í˜¸ë¨: '$file_path >&2; exit 2; fi"
          },
          {
            "type": "command",
            "command": "content=$(jq -r '.tool_input.content // .tool_input.new_string // \"\"'); file_path=$(jq -r '.tool_input.file_path'); if [[ \"$file_path\" == *.rb ]] && echo \"$content\" | grep -qE 'binding\\.pry|debugger|byebug'; then echo 'âŒ ë””ë²„ê·¸ ì½”ë“œ ì œê±° í•„ìš”: binding.pry, debugger, byebug' >&2; exit 2; fi"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "file_path=$(jq -r '.tool_input.file_path'); if [[ \"$file_path\" == *.rb ]]; then rubocop -a \"$file_path\" 2>/dev/null || true; fi"
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "osascript -e 'display notification \"ìž‘ì—… ì™„ë£Œ\" with title \"Claude Code\" sound name \"Glass\"'"
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "matcher": "startup",
        "hooks": [
          {
            "type": "command",
            "command": "if [ -f \"$CLAUDE_PROJECT_DIR/plan.md\" ]; then echo 'ðŸ“‹ TDD ì§„í–‰ ìƒí™©:' && grep -E '^- \\[[ x]\\]' \"$CLAUDE_PROJECT_DIR/plan.md\" 2>/dev/null | head -5; fi"
          }
        ]
      }
    ],
    "SessionEnd": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "mkdir -p \"$CLAUDE_PROJECT_DIR/docs/logs\" && jq -r '.transcript_path' | xargs -I {} ruby \"$CLAUDE_PROJECT_DIR/scripts/session_to_md.rb\" {} 2>/dev/null || true"
          }
        ]
      }
    ]
  }
}
