<div class="fixed inset-0 bg-sketch-paper flex flex-col z-[100]">
  <!-- 헤더 (진행률 2/3) -->
  <%= render "onboarding/header", step: 2 %>

  <%= form_with model: @child, url: onboarding_child_path, method: :post, local: true, class: "flex-1 flex flex-col" do |form| %>
    <!-- 컨텐츠 -->
    <%= render Sketch::ContainerComponent.new(padding: :lg, variant: :paper, border: false, class: "flex-1 pb-24") do %>
      <div class="flex flex-col items-center">
        <%= render Sketch::AvatarComponent.new(size: :xl, initials: "👶", border: true, class: "mb-6") %>

        <h1 class="text-2xl font-sketch font-bold text-sketch-ink text-center mb-2">
          아이 정보를 등록해주세요
        </h1>
        <p class="font-hand text-sketch-gray text-center mb-8">
          성장 기록의 주인공이에요
        </p>

        <% if @child.errors.any? %>
          <%= render Sketch::AlertComponent.new(variant: :error, dismissible: false, class: "mb-4 w-full max-w-md") do %>
            <% @child.errors.full_messages.each do |message| %>
              <p class="text-sm"><%= message %></p>
            <% end %>
          <% end %>
        <% end %>

        <div class="space-y-4 w-full max-w-md">
          <%= render Sketch::InputComponent.new(
            name: "child[name]",
            label: "이름",
            placeholder: "아이 이름",
            value: @child.name,
            required: true
          ) %>

          <%= render Sketch::InputComponent.new(
            name: "child[birthdate]",
            type: :date,
            label: "생년월일",
            value: @child.birthdate,
            required: true
          ) %>

          <div>
            <label class="block mb-2 font-sketch text-sm font-medium text-sketch-ink">성별</label>
            <div class="flex gap-3" data-controller="gender-select">
              <button type="button"
                      class="flex-1 py-3 rounded-xl border-2 font-sketch font-medium transition-colors
                             border-sketch-ink bg-sketch-cream text-sketch-ink"
                      data-gender-select-target="female"
                      data-action="click->gender-select#selectFemale">
                여아
              </button>
              <button type="button"
                      class="flex-1 py-3 rounded-xl border-2 font-sketch font-medium transition-colors
                             border-sketch-gray bg-transparent text-sketch-gray"
                      data-gender-select-target="male"
                      data-action="click->gender-select#selectMale">
                남아
              </button>
            </div>
            <%= form.hidden_field :gender, value: @child.gender || "female", data: { gender_select_target: "input" } %>
          </div>
        </div>
      </div>
    <% end %>

    <!-- 하단 버튼 -->
    <%= render Sketch::ContainerComponent.new(padding: :lg, variant: :paper, border: false, class: "pb-8 space-y-3") do %>
      <%= render Sketch::ButtonComponent.new(
        variant: :primary,
        type: :submit,
        full_width: true,
        size: :lg
      ) do %>
        다음
      <% end %>
      <%= render Sketch::ButtonComponent.new(
        variant: :ghost,
        type: :button,
        full_width: true,
        size: :md,
        class: "text-sketch-gray",
        data: {
          controller: "navigation",
          action: "click->navigation#goToInvite",
          navigation_invite_path_value: onboarding_invite_path
        }
      ) do %>
        나중에 할게요
      <% end %>
    <% end %>
  <% end %>
</div>

<%# Inline script removed - functionality now handled by Stimulus controllers:
    - gender_select_controller.js
    - navigation_controller.js
%>
