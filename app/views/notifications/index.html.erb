<%# Frame0 Sketch Design System - Notifications %>
<%= render Sketch::ContainerComponent.new(padding: :md, variant: :paper) do %>
  <h1 class="text-2xl font-sketch font-bold text-sketch-ink mb-6">알림</h1>

  <% if @notifications.empty? %>
    <!-- 빈 상태 -->
    <%= render Sketch::EmptyStateComponent.new(
      icon: "bell",
      title: "알림이 없습니다",
      description: "새로운 소식이 있으면 알려드릴게요.",
      size: :md
    ) %>
  <% else %>
    <!-- 알림 목록 -->
    <div class="space-y-2">
      <% @notifications.each do |notification| %>
        <%= link_to notification_path(notification),
                    data: { turbo_method: :patch },
                    class: "block" do %>
          <%= render Sketch::CardComponent.new(
            variant: notification.read? ? :flat : :default,
            padding: :md,
            hoverable: true,
            clickable: true,
            class: notification.read? ? "" : "border-l-4 border-l-sketch-ink"
          ) do %>
            <div class="flex items-start gap-3">
              <!-- 아바타 -->
              <%= render Sketch::AvatarComponent.new(
                size: :md,
                initials: notification.actor&.nickname&.first || '?',
                border: true
              ) %>

              <!-- 내용 -->
              <div class="flex-1 min-w-0">
                <p class="text-sm font-hand text-sketch-ink font-medium">
                  <%= notification.message %>
                </p>
                <p class="text-xs font-hand text-sketch-gray mt-1">
                  <%= time_ago_in_words(notification.created_at) %> 전
                </p>
              </div>

              <!-- 읽지 않음 표시 -->
              <% unless notification.read? %>
                <div class="w-2 h-2 bg-sketch-ink rounded-full flex-shrink-0 mt-2"></div>
              <% end %>
            </div>
          <% end %>
        <% end %>
      <% end %>
    </div>
  <% end %>
<% end %>
